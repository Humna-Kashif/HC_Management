{"ast":null,"code":"var _jsxFileName = \"/home/humna/Desktop/aibers_web/client/src/views/Components/LocationItem.js\";\nimport React, { useState } from \"react\";\nimport { Button, Col, Row, ButtonGroup } from \"react-bootstrap\";\nimport TimePicker from 'react-time-picker';\nimport AsyncSelect from 'react-select/async';\nimport { editLocationAPI, deleteLocationAPI } from \"../DB/API\";\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst LocationItem = props => {\n  const doc_Id = props.id;\n  const itemData = props.itemData;\n  const Enabled = props.isEnableEdit;\n  const [data, setData] = useState(itemData);\n  const [enableEdit, setEnableEdit] = useState(true);\n  const [editCtrl, setEditCtrl] = useState(false);\n  const [deleteCtrl, setDeleteCtrl] = useState(false);\n  const [selectedValue, setSelectedValue] = useState(itemData.location);\n  const [searchLocList, setSearchLocList] = useState([]);\n  const [inputValue, setValue] = useState('null');\n  const [startTimePick, setstartTimePick] = useState(itemData.start_time);\n  const [endTimePick, setendTimePick] = useState(itemData.end_time);\n  const [feeValue, setFeeValue] = useState(itemData.fees);\n  const [daysData, setDaysData] = useState(itemData.days);\n\n  const handleEditBtn = () => {\n    setEnableEdit(false);\n    setEditCtrl(true);\n  };\n\n  const handleDeleteBtn = () => {\n    setEnableEdit(false);\n    setDeleteCtrl(true);\n  };\n\n  const handleConfirmEdit = id => {\n    // console.log(\"location :\",selectedValue);\n    // console.log(\"start time :\",startTimePick);\n    // console.log(\"end time :\",endTimePick);\n    // console.log(\"days :\",daysData);\n    // console.log(\"fee :\",feeValue);\n    // if(selectedValue != -1){\n    //     console.log(\"done1 :\", selectedValue.label);\n    // }\n    // else\n    // {\n    // console.log(\"done2 :\", selectedValue);\n    // }\n    editLocationAPI(doc_Id, \"PUT\", id, selectedValue.label, daysData, feeValue, startTimePick, endTimePick).then(result => {\n      console.log(\"new location api\", result);\n      setData(result);\n      props.callback();\n    });\n    setEnableEdit(true);\n    setEditCtrl(false);\n  };\n\n  const handleCancelEdit = () => {\n    setData(itemData);\n    setEnableEdit(true);\n    setEditCtrl(false);\n  };\n\n  const handleConfirmDel = id => {\n    console.log(\"new id api\", id);\n    deleteLocationAPI(doc_Id, 'PUT', id).then(result => {\n      console.log(\"new location api\", result);\n      setData(result);\n      props.callback();\n    });\n    setEnableEdit(true);\n    setDeleteCtrl(false);\n  };\n\n  const handleCancelDel = () => {\n    setEnableEdit(true);\n    setDeleteCtrl(false);\n  };\n\n  if (!Enabled && (editCtrl || deleteCtrl)) {\n    handleCancelEdit();\n    handleCancelDel();\n  }\n\n  const [daysArray, setDaysArray] = useState([{\n    day: \"mon\",\n    selected: false\n  }, {\n    day: \"tue\",\n    selected: false\n  }, {\n    day: \"wed\",\n    selected: false\n  }, {\n    day: \"thu\",\n    selected: false\n  }, {\n    day: \"fri\",\n    selected: false\n  }, {\n    day: \"sat\",\n    selected: false\n  }, {\n    day: \"sun\",\n    selected: false\n  }]);\n\n  const dayBtnClicked = (item, i) => {\n    let temp = daysArray;\n    temp[i].selected = !item.selected;\n    console.log(\"Temp: \", temp, \"days: \", daysArray);\n    setDaysArray(temp);\n    formatDaysString();\n  };\n\n  const selectAllDays = () => {\n    let tempArray = [];\n    daysArray.map(item => {\n      let tempItem = item;\n      tempItem.selected = true;\n      return tempArray.push(tempItem);\n    });\n    setDaysArray(tempArray);\n    formatDaysString();\n  };\n\n  const formatDaysString = () => {\n    let stringTemp = [];\n    daysArray.map(item => {\n      if (item.selected) stringTemp.push(item);\n      return true;\n    });\n    setDaysData(stringTemp.map(item => item.selected && item.day).join(\"-\"));\n  };\n\n  const renderDaysBtns = () => {\n    return /*#__PURE__*/React.createElement(ButtonGroup, {\n      toggle: true,\n      style: {\n        display: \"flex\",\n        flex: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, console.log(\"rendered with : \", daysArray), daysArray.map((item, i) => /*#__PURE__*/React.createElement(Button, {\n      key: i,\n      variant: item.selected ? \"primary\" : \"outline-primary\",\n      onClick: () => dayBtnClicked(item, i),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, item.day.toUpperCase())), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-primary\",\n      onClick: () => selectAllDays(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, \"All\"));\n  };\n\n  const [startISO, setStartISO] = useState();\n  const [EndISO, setEndISO] = useState();\n\n  const settingTimeISO = () => {\n    let datetest = new Date();\n    let timmee = datetest.getTime();\n    let dateFromUI = \"12-10-2020\";\n    let myTimeStart = startTimePick;\n    let myTimeEnd = endTimePick;\n    let dateParts = dateFromUI.split(\"-\");\n    let timeParts = myTimeStart.split(\":\");\n    let timePartsEnd = myTimeEnd.split(\":\");\n    let dateStart = new Date(dateParts[2], dateParts[0] - 1, dateParts[1], timeParts[0], timeParts[1]);\n    let dateEnd = new Date(dateParts[2], dateParts[0] - 1, dateParts[1], timePartsEnd[0], timePartsEnd[1]);\n    let dateISOStart = dateStart.toISOString();\n    let dateISOEnd = dateEnd.toISOString();\n    console.log(\"Time checking: \", timmee.toString(), \"StartValue\", startTimePick, \"StartISO: \", dateISOStart, \"EndISO: \", dateISOEnd);\n    setStartISO(dateISOStart);\n    setEndISO(dateISOEnd);\n    console.log(\"ISO: \", startISO, EndISO);\n  };\n\n  const formattedSearchList = () => {\n    let formattedList = [];\n    !!searchLocList && searchLocList.map(item => {\n      console.log(\"Loop\");\n      return formattedList.push({\n        value: item.hospital_id,\n        label: item.location\n      });\n    });\n    console.log(\"Formatted list: \", formattedList);\n    return formattedList;\n  };\n\n  const loadOptions = (inputValue, callback) => {\n    setTimeout(() => {\n      callback(formattedSearchList());\n    }, 1000);\n  };\n\n  const handleInputChange = value => {\n    const inValue = value;\n    console.log(inputValue);\n\n    if (inValue !== '') {\n      fetch(\"https://app.aibers.health/doctors/\" + doc_Id + \"/profile/locations/\" + inValue).then(response => response.json()).then(data => {\n        console.log('This is search location data:', data);\n        setSearchLocList(data);\n      }).catch(error => console.error(error)).finally(() => loadOptions);\n    }\n\n    setValue(inValue);\n  };\n\n  const handleChange = value => {\n    setSelectedValue(value);\n  };\n\n  return /*#__PURE__*/React.createElement(Row, {\n    style: {\n      margin: 0,\n      marginBottom: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, console.log(\"item rendered\", itemData.location, \"editing\", props.isEnableEdit, \"value\", enableEdit, Enabled), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    style: {\n      textAlign: \"left\",\n      minHeight: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, editCtrl ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flex: \"1\",\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal_label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, \"Edit Location\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AsyncSelect, {\n    placeholder: itemData.location // cacheOptions\n    ,\n    defaultOptions: true,\n    value: selectedValue,\n    loadOptions: loadOptions,\n    onInputChange: handleInputChange,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, \"Fee :\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      width: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    style: styles.input,\n    placeholder: \"Fee\",\n    type: \"text\",\n    value: feeValue,\n    noValidate: true,\n    onChange: e => setFeeValue(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      marginTop: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }, \"Start time :\"), /*#__PURE__*/React.createElement(TimePicker, {\n    onChange: value => {\n      setstartTimePick(value);\n    },\n    value: itemData.start_time,\n    clockIcon: null,\n    clearIcon: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, \"End time :\"), /*#__PURE__*/React.createElement(TimePicker, {\n    onChange: value => setendTimePick(value),\n    value: itemData.end_time,\n    clockIcon: null,\n    clearIcon: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 42\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    style: {\n      display: \"flex\",\n      flex: \"1\",\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 22\n    }\n  }, \"Previous Selected Days :\"), itemData.days), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }\n  }, \"Select Days :\"), renderDaysBtns(), daysData))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"dl\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, \"Location: \", itemData.location), /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 21\n    }\n  }, \"Fess: \", itemData.fees), /*#__PURE__*/React.createElement(\"dd\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 21\n    }\n  }, \"Timings: \", itemData.start_time, \" to \", itemData.end_time, \" (\", itemData.days, \")\")))), Enabled && enableEdit && /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    xs: 8,\n    style: {\n      alignItems: \"center\",\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    variant: \"primary\",\n    onClick: handleEditBtn,\n    style: {\n      marginRight: 5,\n      width: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 21\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    variant: \"outline-primary\",\n    onClick: handleDeleteBtn,\n    style: {\n      width: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 21\n    }\n  }, \"Delete\")), editCtrl && /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    xs: 8,\n    style: {\n      alignItems: \"center\",\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    variant: \"primary\",\n    onClick: () => handleConfirmEdit(itemData.doctors_hospital_location_id),\n    style: {\n      marginRight: 5,\n      width: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }\n  }, \"Confirm\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    variant: \"outline-primary\",\n    onClick: handleCancelEdit,\n    style: {\n      width: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 21\n    }\n  }, \"Cancel\")), deleteCtrl && /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    xs: 8,\n    style: {\n      alignItems: \"center\",\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    variant: \"primary\",\n    onClick: () => handleConfirmDel(itemData.doctors_hospital_location_id),\n    style: {\n      marginRight: 5,\n      width: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 21\n    }\n  }, \"Delete\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    variant: \"outline-primary\",\n    onClick: handleCancelDel,\n    style: {\n      width: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 21\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default LocationItem;\nLocationItem.defaultProps = {\n  itemDate: {\n    doctors_hospital_location_id: 45,\n    hospital_location_status: true,\n    location: \"cmh\",\n    days: \"mon-fri\",\n    fees: \"500\",\n    start_time: \"13:00\",\n    end_time: \"19:00\"\n  }\n};\nconst styles = {\n  input: {\n    fontSize: 14,\n    padding: 8,\n    borderRadius: \"5px\"\n  }\n};","map":{"version":3,"sources":["/home/humna/Desktop/aibers_web/client/src/views/Components/LocationItem.js"],"names":["React","useState","Button","Col","Row","ButtonGroup","TimePicker","AsyncSelect","editLocationAPI","deleteLocationAPI","DeleteIcon","LocationItem","props","doc_Id","id","itemData","Enabled","isEnableEdit","data","setData","enableEdit","setEnableEdit","editCtrl","setEditCtrl","deleteCtrl","setDeleteCtrl","selectedValue","setSelectedValue","location","searchLocList","setSearchLocList","inputValue","setValue","startTimePick","setstartTimePick","start_time","endTimePick","setendTimePick","end_time","feeValue","setFeeValue","fees","daysData","setDaysData","days","handleEditBtn","handleDeleteBtn","handleConfirmEdit","label","then","result","console","log","callback","handleCancelEdit","handleConfirmDel","handleCancelDel","daysArray","setDaysArray","day","selected","dayBtnClicked","item","i","temp","formatDaysString","selectAllDays","tempArray","map","tempItem","push","stringTemp","join","renderDaysBtns","display","flex","toUpperCase","startISO","setStartISO","EndISO","setEndISO","settingTimeISO","datetest","Date","timmee","getTime","dateFromUI","myTimeStart","myTimeEnd","dateParts","split","timeParts","timePartsEnd","dateStart","dateEnd","dateISOStart","toISOString","dateISOEnd","toString","formattedSearchList","formattedList","value","hospital_id","loadOptions","setTimeout","handleInputChange","inValue","fetch","response","json","catch","error","finally","handleChange","margin","marginBottom","textAlign","minHeight","flexDirection","width","styles","input","e","target","marginTop","alignItems","justifyContent","marginRight","doctors_hospital_location_id","defaultProps","itemDate","hospital_location_status","fontSize","padding","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { Button, Col, Row,ButtonGroup } from \"react-bootstrap\";\nimport TimePicker from 'react-time-picker';\nimport AsyncSelect from 'react-select/async';\nimport {editLocationAPI,deleteLocationAPI} from \"../DB/API\"\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst LocationItem = (props) => {\n    const doc_Id = props.id;\n    const itemData = props.itemData;\n    const Enabled = props.isEnableEdit;\n    const [data, setData] = useState(itemData);\n    const [enableEdit, setEnableEdit] =  useState(true);      \n    const [editCtrl, setEditCtrl] = useState(false);\n    const [deleteCtrl, setDeleteCtrl] = useState(false);\n    const [selectedValue, setSelectedValue] = useState(itemData.location);\n    const [searchLocList, setSearchLocList]=useState([]);\n    const [inputValue, setValue] = useState('null');\n    const [startTimePick, setstartTimePick] = useState(itemData.start_time);\n    const [endTimePick, setendTimePick] = useState(itemData.end_time);\n    const [feeValue,setFeeValue] = useState(itemData.fees);\n    const [daysData, setDaysData] = useState(itemData.days);\n\n    const handleEditBtn = () => {\n        setEnableEdit(false);\n        setEditCtrl(true);\n    }\n    const handleDeleteBtn = () => {\n        setEnableEdit(false);\n        setDeleteCtrl(true);\n    }\n    const handleConfirmEdit = (id) => {\n        // console.log(\"location :\",selectedValue);\n        // console.log(\"start time :\",startTimePick);\n        // console.log(\"end time :\",endTimePick);\n        // console.log(\"days :\",daysData);\n        // console.log(\"fee :\",feeValue);\n        // if(selectedValue != -1){\n        //     console.log(\"done1 :\", selectedValue.label);\n        // }\n        // else\n        // {\n        // console.log(\"done2 :\", selectedValue);\n        // }\n        editLocationAPI(doc_Id,\"PUT\",id,selectedValue.label,daysData,feeValue,startTimePick,endTimePick).then(result => {\n            console.log(\"new location api\",result);\n            setData(result);\n            props.callback();\n        });\n        setEnableEdit(true);\n        setEditCtrl(false);\n    }\n    const handleCancelEdit = () => {\n        setData(itemData);\n        setEnableEdit(true);\n        setEditCtrl(false);\n    }\n    const handleConfirmDel = (id) => {\n        console.log(\"new id api\",id);\n        deleteLocationAPI(doc_Id,'PUT',id).then(result => {\n            console.log(\"new location api\",result);\n            setData(result);\n            props.callback();\n        });\n        setEnableEdit(true);\n        setDeleteCtrl(false);\n    }\n    const handleCancelDel = () => {\n\n        setEnableEdit(true);\n        setDeleteCtrl(false);\n    }\n\n    if(!Enabled && (editCtrl || deleteCtrl)){\n        handleCancelEdit()\n        handleCancelDel();\n    }\n\n      const [daysArray, setDaysArray] = useState( [\n        {day: \"mon\", selected: false},\n        {day: \"tue\", selected: false},\n        {day: \"wed\", selected: false},\n        {day: \"thu\", selected: false},\n        {day: \"fri\", selected: false},\n        {day: \"sat\", selected: false},\n        {day: \"sun\", selected: false}\n    ]);\n\n    const dayBtnClicked = (item,i) => {\n        let temp = daysArray;\n        temp[i].selected = !item.selected;\n        console.log(\"Temp: \" , temp, \"days: \", daysArray);\n        setDaysArray(temp);\n        formatDaysString();\n    }\n\n    const selectAllDays = () => {\n        let tempArray = [];\n        daysArray.map((item)=>{\n            let tempItem = item;\n            tempItem.selected = true;\n            return tempArray.push(tempItem);\n        });\n        setDaysArray(tempArray);\n        formatDaysString();\n    }\n\n    const formatDaysString = () =>{\n        let stringTemp = [];\n        daysArray.map((item) => {\n            if(item.selected)\n                stringTemp.push(item)\n                return true;\n        });\n        setDaysData(stringTemp.map((item)=>(\n            item.selected && item.day\n            )).join(\"-\"));\n    }\n\n    const renderDaysBtns = () => {\n        return( \n        <ButtonGroup toggle={true} style={{display: \"flex\", flex: 1}}>\n            {console.log(\"rendered with : \", daysArray )}\n            {daysArray.map((item,i)=>(\n            <Button key={i}\n                variant={item.selected ? \"primary\" : \"outline-primary\"} \n                onClick={() => dayBtnClicked(item,i)}>\n                    {item.day.toUpperCase()}\n                </Button>\n            ))  \n            }\n            <Button\n                variant=\"outline-primary\"\n                onClick={() => selectAllDays()}\n            >\n                All\n            </Button>\n        </ButtonGroup> )\n    }\n\n    const [startISO,setStartISO] = useState();\n    const [EndISO,setEndISO] = useState();\n\n    const settingTimeISO = () => {\n        let datetest = new Date();\n        let timmee = datetest.getTime();\n        let dateFromUI = \"12-10-2020\";\n        let myTimeStart = startTimePick;\n        let myTimeEnd = endTimePick;\n        let dateParts = dateFromUI.split(\"-\");\n        let timeParts = myTimeStart.split(\":\");\n        let timePartsEnd = myTimeEnd.split(\":\");\n\n        let dateStart = new Date(dateParts[2], dateParts[0]-1, dateParts[1], timeParts[0], timeParts[1]);\n        let dateEnd = new Date(dateParts[2], dateParts[0]-1, dateParts[1], timePartsEnd[0], timePartsEnd[1]);\n\n        let dateISOStart = dateStart.toISOString();\n        let dateISOEnd = dateEnd.toISOString();\n        console.log(\"Time checking: \", timmee.toString(),\"StartValue\", startTimePick, \"StartISO: \", dateISOStart,\"EndISO: \", dateISOEnd);\n        \n        setStartISO(dateISOStart);\n        setEndISO(dateISOEnd);\n        console.log(\"ISO: \", startISO, EndISO);\n    }\n\n    const formattedSearchList = () => {\n        let formattedList = [];\n        !!(searchLocList) && (\n            searchLocList.map((item)=>{\n                console.log(\"Loop\");\n                return formattedList.push({\n                    value: item.hospital_id, label: item.location\n                });\n            })\n        );\n        console.log(\"Formatted list: \", formattedList);\n        return formattedList;\n    }\n\n    const loadOptions = (inputValue, callback) => {\n        setTimeout(() => {\n          callback(formattedSearchList());\n        }, 1000);\n      };\n\n    const handleInputChange = value => {\n        const inValue = value;\n        console.log(inputValue);\n        if(inValue !== ''){\n            fetch(\"https://app.aibers.health/doctors/\"+doc_Id+\"/profile/locations/\"+inValue)\n            .then((response) => response.json())\n            .then((data) => {\n                    console.log('This is search location data:', data);\n                    setSearchLocList(data);\n                }) \n            .catch((error) => console.error(error))\n            .finally(() =>loadOptions); \n        }\n      setValue(inValue);\n    };\n    const handleChange = value => {     \n      setSelectedValue(value);\n    }\n\n  \n\n \n\n    return (\n        <Row style={{margin: 0 , marginBottom:8}}>\n            {console.log(\"item rendered\", itemData.location, \"editing\", props.isEnableEdit, \"value\", enableEdit, Enabled)}\n            <Col lg={1}></Col>\n            <Col style={{textAlign: \"left\", minHeight: 30}}>\n                { editCtrl ? \n                (<div style={{display:\"flex\", flex:\"1\", flexDirection:\"column\"}}>\n        <Row>\n            <Col>\n                <div className=\"modal_label\">Edit Location</div>\n                    <div>\n                        <AsyncSelect\n                            placeholder={itemData.location}\n                            // cacheOptions\n                            defaultOptions\n                            value={selectedValue}\n                            loadOptions={loadOptions}\n                            onInputChange={handleInputChange}\n                            onChange={handleChange}\n                        />\n                </div>\n            </Col>\n        </Row>\n        <Row>\n            <Col>\n            <label>Fee :</label>\n                <div style={{display:\"flex\", flexDirection:\"row\",width:\"100px\"}}> \n                        <input\n                        style={styles.input}\n                        placeholder=\"Fee\"\n                        type=\"text\"\n                        value={feeValue}\n                        noValidate\n                        onChange={e => setFeeValue(e.target.value)}\n                        /> \n                </div>\n            </Col>\n        </Row>\n        <Row style={{marginTop:\"10px\"}}>\n            <Col>\n                <label>Start time :</label>\n                <TimePicker\n                onChange={(value) => {\n                    setstartTimePick(value);\n                }}\n                value={itemData.start_time}\n                clockIcon={null}\n                clearIcon={null}\n                />\n            </Col>\n            <Col>\n                <label>End time :</label><TimePicker\n                onChange={(value) => setendTimePick(value)}\n                value={itemData.end_time}\n                clockIcon={null}\n                clearIcon={null}\n                />\n            </Col>\n        </Row>\n        <Row>\n            <Col style={{display:\"flex\", flex:\"1\", flexDirection:\"column\"}}>\n                <div><label>Previous Selected Days :</label>\n                {itemData.days}</div>\n                <label>Select Days :</label>\n                {renderDaysBtns()}\n                {daysData}\n            </Col>\n        </Row>\n    </div>)\n        :(  \n            <div>\n                <dl>\n                    <dd>Location: {itemData.location}</dd>\n                    <dd>Fess: {itemData.fees}</dd>\n                    <dd>Timings: {itemData.start_time} to {itemData.end_time} ({itemData.days})</dd>\n                </dl>\n            </div>  \n        )\n    }\n            </Col>\n            {Enabled && enableEdit &&(\n                <Col lg={3} xs={8} style={{alignItems:\"center\", display: \"flex\", justifyContent: \"flex-end\"}}>\n                    <Button size=\"sm\" variant=\"primary\" onClick={handleEditBtn} style={{marginRight:5, width: 80}}>\n                        Edit\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline-primary\" onClick={handleDeleteBtn} style={{width: 80}}>\n                        Delete\n                    </Button>\n                </Col>\n            )}\n            {editCtrl &&(\n                <Col lg={3} xs={8} style={{alignItems:\"center\", display: \"flex\", justifyContent: \"flex-end\"}}>\n                    <Button size=\"sm\" variant=\"primary\" onClick={()=>handleConfirmEdit(itemData.doctors_hospital_location_id)} style={{marginRight:5, width: 80}}>\n                        Confirm\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline-primary\" onClick={handleCancelEdit} style={{width: 80}}>\n                        Cancel\n                    </Button>\n                </Col>\n            )}\n            {deleteCtrl && (\n                <Col lg={3} xs={8} style={{alignItems:\"center\", display: \"flex\", justifyContent: \"flex-end\"}}>\n                    <Button size=\"sm\" variant=\"primary\" onClick={()=>handleConfirmDel(itemData.doctors_hospital_location_id)} style={{marginRight:5, width: 80}}>\n                        Delete\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline-primary\" onClick={handleCancelDel} style={{width: 80}}>\n                        Cancel\n                    </Button>\n                </Col>\n            )}\n\n            <Col lg={1}></Col>\n        </Row>\n    )\n}\n\nexport default LocationItem\n\nLocationItem.defaultProps = {\n    itemDate: {\n        doctors_hospital_location_id: 45,\n        hospital_location_status: true,\n        location: \"cmh\",\n        days: \"mon-fri\",\n        fees: \"500\",\n        start_time: \"13:00\",\n        end_time: \"19:00\",\n\n    }\n}\n\n\nconst styles = {\n    input: {fontSize:14, padding: 8,borderRadius: \"5px\"}\n}"]},"metadata":{},"sourceType":"module"}
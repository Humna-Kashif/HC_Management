{"ast":null,"code":"var _jsxFileName = \"/home/humna/Desktop/aibers_web/client/src/views/Components/CalenderSection.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\nimport Calender from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\nimport { appointmentsByDateAPI, patientInfoAPI, appointmentDetailAPI, locationsAPI } from \"../DB/API\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport moment from 'moment';\nimport AppointmentsList from '../Components/AppointmentsList';\nimport PatientProfile from '../Components/PatientProfile';\nimport '../Styles/Calender.css';\nimport '../Styles/AppointmentItem.css';\n\nconst CalenderSection = props => {\n  const doc_ID = props.id;\n  const [clickedItem, setClickedItem] = useState();\n  const [data, setData] = useState(props.data);\n  const [date, setDate] = useState(new Date());\n  const [pat_ID, setPat_ID] = useState(0);\n  const [loc_ID, setLoc_ID] = useState(0);\n  const [locationData, setLocationData] = useState([]);\n  const [selectValue, setSelectedValue] = useState(0);\n\n  const onChange = date => {\n    setDate(date);\n    getAppointments(date, selectValue);\n  };\n\n  const mydate = moment(date);\n  const newdate = mydate.format('YYYY-MM-DD');\n  console.log(\"new date is\", newdate, \"Appointment id \", pat_ID, \"location id \", loc_ID); //Get All appointments by date\n\n  const getAppointments = (dateValue, selectedValue) => {\n    const mydate = moment(dateValue);\n    const newdate = mydate.format('YYYY-MM-DD');\n    console.log(\"new date is\", newdate, \"Appointment id \", pat_ID, \"location id \", loc_ID);\n    appointmentsByDateAPI(doc_ID, selectedValue, pat_ID, newdate).then(result => {\n      console.log(\"Appointment api\", result);\n      setData(result);\n    });\n  };\n\n  const refreshCallBack = () => {\n    // console.log(\"Call back\");\n    appointmentsByDateAPI(doc_ID, loc_ID, pat_ID, newdate).then(result => {\n      console.log(\"Appointment api\", result);\n      setData(result);\n    });\n  }; //Patient info\n\n\n  const getPatientInfo = () => {\n    patientInfoAPI(1).then(result => {\n      console.log(\"patient info api\", result);\n    });\n  }; //Appointment details\n\n\n  const getAppointmentDetail = () => {\n    appointmentDetailAPI(1).then(result => {\n      console.log(\"Appointment history api\", result);\n    });\n  };\n\n  const handleAppointmentItem = item => {\n    console.log(\"appointmentclicked\", item.patient.patient_id);\n    appointmentDetailAPI(item.patient.patient_id).then(result => {\n      console.log(\"patient info api\", result);\n      setClickedItem(result[0]);\n    });\n  };\n\n  const callBack = (status, appointment_id) => {\n    console.log(\"Call back from list item: \", status, \"Appointment ID: \", appointment_id);\n\n    if (status === \"inprogress\" || status === \"upcoming\") {\n      props.callback(status, appointment_id);\n    }\n\n    getAppointments(date, selectValue);\n  };\n\n  const renderItem = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, data.map((item, i) => /*#__PURE__*/React.createElement(AppointmentsList, {\n      key: i,\n      className: \"appointment-item\",\n      pat_ID: pat_ID,\n      loc_ID: loc_ID,\n      id: doc_ID,\n      itemData: item,\n      onClick: () => handleAppointmentItem(item),\n      callback: callBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 35\n      }\n    })));\n  };\n\n  useEffect(() => {\n    locationsAPI(doc_ID).then(result => {\n      console.log(\"location api in calender results\", result);\n      setLocationData(result); // setSelectedValue(data.appointment_location.appointment_location_of_doctor);\n      // collectDisabledDays(data.appointment_location.days);\n    });\n  }, []);\n\n  const handleChange1 = e => {\n    setSelectedValue(e.target.value);\n    getAppointments(date, e.target.value);\n  };\n\n  const renderItems = () => {\n    console.log(\"locationData is \", locationData);\n    return locationData.map((item, i) => /*#__PURE__*/React.createElement(\"option\", {\n      value: item.doctors_hospital_location_id,\n      days: item.days,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, item.location));\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    style: {\n      margin: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginRight: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 64\n    }\n  }, \"Select Location : \"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: selectValue,\n    onChange: handleChange1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, \"All\"), renderItems()))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(Calender, {\n    onChange: onChange,\n    value: date,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, \"Timeline Que\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, renderItem())), /*#__PURE__*/React.createElement(Col, {\n    lg: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, !!clickedItem && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(PatientProfile, {\n    pat_ID: pat_ID,\n    loc_ID: loc_ID,\n    id: doc_ID,\n    itemData: clickedItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  })))));\n};\n\nexport default CalenderSection;\nconst styles = {\n  label: {\n    fontSize: 14,\n    color: \"grey\",\n    textAlign: \"Left\",\n    marginLeft: \"20px\",\n    marginTop: \"20px\"\n  }\n};\nCalenderSection.defaultProps = {\n  data: []\n};","map":{"version":3,"sources":["/home/humna/Desktop/aibers_web/client/src/views/Components/CalenderSection.js"],"names":["React","useEffect","useState","Button","Col","Container","Row","Calender","appointmentsByDateAPI","patientInfoAPI","appointmentDetailAPI","locationsAPI","moment","AppointmentsList","PatientProfile","CalenderSection","props","doc_ID","id","clickedItem","setClickedItem","data","setData","date","setDate","Date","pat_ID","setPat_ID","loc_ID","setLoc_ID","locationData","setLocationData","selectValue","setSelectedValue","onChange","getAppointments","mydate","newdate","format","console","log","dateValue","selectedValue","then","result","refreshCallBack","getPatientInfo","getAppointmentDetail","handleAppointmentItem","item","patient","patient_id","callBack","status","appointment_id","callback","renderItem","map","i","handleChange1","e","target","value","renderItems","doctors_hospital_location_id","days","location","margin","display","flexDirection","marginRight","styles","label","fontSize","color","textAlign","marginLeft","marginTop","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,EAAiBC,GAAjB,EAAsBC,SAAtB,EAAiCC,GAAjC,QAA4C,iBAA5C;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAO,kCAAP;AACA,SAAQC,qBAAR,EAA8BC,cAA9B,EAA6CC,oBAA7C,EAAkEC,YAAlE,QAAqF,WAArF;AACA,OAAO,sCAAP;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,gBAAP,MAA6B,gCAA7B;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAO,wBAAP;AACA,OAAO,+BAAP;;AAEA,MAAMC,eAAe,GAAIC,KAAD,IAAU;AAC9B,QAAMC,MAAM,GAAGD,KAAK,CAACE,EAArB;AACA,QAAM,CAACC,WAAD,EAAaC,cAAb,IAA+BlB,QAAQ,EAA7C;AACA,QAAM,CAACmB,IAAD,EAAOC,OAAP,IAAkBpB,QAAQ,CAACc,KAAK,CAACK,IAAP,CAAhC;AACA,QAAM,CAACE,IAAD,EAAOC,OAAP,IAAkBtB,QAAQ,CAAC,IAAIuB,IAAJ,EAAD,CAAhC;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAAC0B,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAAC4B,YAAD,EAAcC,eAAd,IAAiC7B,QAAQ,CAAC,EAAD,CAA/C;AACA,QAAM,CAAC8B,WAAD,EAAaC,gBAAb,IAAiC/B,QAAQ,CAAC,CAAD,CAA/C;;AAEA,QAAMgC,QAAQ,GAAGX,IAAI,IAAG;AACpBC,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAY,IAAAA,eAAe,CAACZ,IAAD,EAAMS,WAAN,CAAf;AACH,GAHD;;AAKA,QAAMI,MAAM,GAAGxB,MAAM,CAACW,IAAD,CAArB;AACA,QAAMc,OAAO,GAAGD,MAAM,CAACE,MAAP,CAAc,YAAd,CAAhB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BH,OAA1B,EAAkC,iBAAlC,EAAoDX,MAApD,EAA2D,cAA3D,EAA0EE,MAA1E,EAjB8B,CAmB9B;;AACA,QAAMO,eAAe,GAAG,CAACM,SAAD,EAAWC,aAAX,KAA6B;AACjD,UAAMN,MAAM,GAAGxB,MAAM,CAAC6B,SAAD,CAArB;AACA,UAAMJ,OAAO,GAAGD,MAAM,CAACE,MAAP,CAAc,YAAd,CAAhB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BH,OAA1B,EAAkC,iBAAlC,EAAoDX,MAApD,EAA2D,cAA3D,EAA0EE,MAA1E;AACApB,IAAAA,qBAAqB,CAACS,MAAD,EAAQyB,aAAR,EAAsBhB,MAAtB,EAA6BW,OAA7B,CAArB,CACCM,IADD,CACMC,MAAM,IAAI;AACZL,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BI,MAA9B;AACAtB,MAAAA,OAAO,CAACsB,MAAD,CAAP;AACH,KAJD;AAKH,GATD;;AAWA,QAAMC,eAAe,GAAC,MAAI;AACtB;AACArC,IAAAA,qBAAqB,CAACS,MAAD,EAAQW,MAAR,EAAeF,MAAf,EAAsBW,OAAtB,CAArB,CACCM,IADD,CACMC,MAAM,IAAI;AACZL,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BI,MAA9B;AACAtB,MAAAA,OAAO,CAACsB,MAAD,CAAP;AACH,KAJD;AAKH,GAPD,CA/B8B,CAwC9B;;;AACA,QAAME,cAAc,GAAG,MAAM;AACzBrC,IAAAA,cAAc,CAAC,CAAD,CAAd,CACCkC,IADD,CACMC,MAAM,IAAI;AACZL,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BI,MAA/B;AACH,KAHD;AAIH,GALD,CAzC8B,CAgD9B;;;AACA,QAAMG,oBAAoB,GAAG,MAAM;AAC/BrC,IAAAA,oBAAoB,CAAC,CAAD,CAApB,CACCiC,IADD,CACMC,MAAM,IAAI;AACZL,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAsCI,MAAtC;AACH,KAHD;AAIH,GALD;;AAOA,QAAMI,qBAAqB,GAAIC,IAAD,IAAS;AACnCV,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAiCS,IAAI,CAACC,OAAL,CAAaC,UAA9C;AACAzC,IAAAA,oBAAoB,CAACuC,IAAI,CAACC,OAAL,CAAaC,UAAd,CAApB,CACCR,IADD,CACMC,MAAM,IAAI;AACZL,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BI,MAA/B;AACAxB,MAAAA,cAAc,CAACwB,MAAM,CAAC,CAAD,CAAP,CAAd;AACH,KAJD;AAMH,GARD;;AAUA,QAAMQ,QAAQ,GAAG,CAACC,MAAD,EAASC,cAAT,KAA4B;AACzCf,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0Ca,MAA1C,EAAkD,kBAAlD,EAAsEC,cAAtE;;AACA,QAAGD,MAAM,KAAK,YAAX,IAA2BA,MAAM,KAAK,UAAzC,EAAoD;AAChDrC,MAAAA,KAAK,CAACuC,QAAN,CAAeF,MAAf,EAAsBC,cAAtB;AACH;;AACDnB,IAAAA,eAAe,CAACZ,IAAD,EAAMS,WAAN,CAAf;AACH,GAND;;AAQA,QAAMwB,UAAU,GAAG,MAAM;AACrB,wBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKnC,IAAI,CAACoC,GAAL,CAAS,CAACR,IAAD,EAAMS,CAAN,kBAAY,oBAAC,gBAAD;AAAkB,MAAA,GAAG,EAAEA,CAAvB;AAA0B,MAAA,SAAS,EAAE,kBAArC;AACtB,MAAA,MAAM,EAAEhC,MADc;AACN,MAAA,MAAM,EAAEE,MADF;AACU,MAAA,EAAE,EAAEX,MADd;AACsB,MAAA,QAAQ,EAAEgC,IADhC;AAEtB,MAAA,OAAO,EAAE,MAAID,qBAAqB,CAACC,IAAD,CAFZ;AAEoB,MAAA,QAAQ,EAAEG,QAF9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAArB,CADL,CADA;AAOH,GARD;;AAUAnD,EAAAA,SAAS,CAAC,MAAM;AACZU,IAAAA,YAAY,CAACM,MAAD,CAAZ,CAAqB0B,IAArB,CAA0BC,MAAM,IAAI;AAChCL,MAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAA+CI,MAA/C;AACAb,MAAAA,eAAe,CAACa,MAAD,CAAf,CAFgC,CAGhC;AACA;AACH,KALD;AAMH,GAPQ,EAOP,EAPO,CAAT;;AAUA,QAAMe,aAAa,GAAIC,CAAD,IAAM;AACxB3B,IAAAA,gBAAgB,CAAC2B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB;AACA3B,IAAAA,eAAe,CAACZ,IAAD,EAAMqC,CAAC,CAACC,MAAF,CAASC,KAAf,CAAf;AACD,GAHH;;AAKA,QAAMC,WAAW,GAAG,MAAM;AACtBxB,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCV,YAAhC;AACA,WACAA,YAAY,CAAC2B,GAAb,CAAiB,CAACR,IAAD,EAAMS,CAAN,kBACb;AAAQ,MAAA,KAAK,EAAET,IAAI,CAACe,4BAApB;AAAkD,MAAA,IAAI,EAAEf,IAAI,CAACgB,IAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoEhB,IAAI,CAACiB,QAAzE,CADJ,CADA;AAKH,GAPD;;AAQA,sBACI,oBAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAE;AAACC,MAAAA,MAAM,EAAC;AAAR,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAC,MAAT;AAAiBC,MAAAA,aAAa,EAAC;AAA/B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,WAAW,EAAC;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA/B,MADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAQ,IAAA,KAAK,EAAEtC,WAAf;AACA,IAAA,QAAQ,EAAE2B,aADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAQ,IAAA,KAAK,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoB,KAApB,CAFJ,EAGKI,WAAW,EAHhB,CADA,CAFJ,CADJ,CADJ,CADJ,eAeI;AAAK,IAAA,KAAK,EAAEQ,MAAM,CAACC,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,oBAAC,QAAD;AACI,IAAA,QAAQ,EAAEtC,QADd;AAEI,IAAA,KAAK,EAAEX,IAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAfJ,eAsBI;AAAK,IAAA,KAAK,EAAEgD,MAAM,CAACC,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,CAtBJ,eAyBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKhB,UAAU,EADf,CAzBJ,CADJ,eA8BI,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,CAAC,CAACrC,WAAF,iBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,cAAD;AAAgB,IAAA,MAAM,EAAEO,MAAxB;AAAgC,IAAA,MAAM,EAAEE,MAAxC;AAAgD,IAAA,EAAE,EAAEX,MAApD;AAA4D,IAAA,QAAQ,EAAEE,WAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAFR,CA9BJ,CADJ,CADJ;AA0CH,CArJD;;AAsJA,eAAeJ,eAAf;AAEA,MAAMwD,MAAM,GAAG;AACXC,EAAAA,KAAK,EAAE;AAACC,IAAAA,QAAQ,EAAE,EAAX;AAAeC,IAAAA,KAAK,EAAE,MAAtB;AAA8BC,IAAAA,SAAS,EAAE,MAAzC;AAAiDC,IAAAA,UAAU,EAAC,MAA5D;AAAoEC,IAAAA,SAAS,EAAC;AAA9E;AADI,CAAf;AAGA9D,eAAe,CAAC+D,YAAhB,GAA+B;AAC3BzD,EAAAA,IAAI,EAAE;AADqB,CAA/B","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { Button, Col, Container, Row } from \"react-bootstrap\"\nimport Calender from 'react-calendar'\nimport 'react-calendar/dist/Calendar.css';\nimport {appointmentsByDateAPI,patientInfoAPI,appointmentDetailAPI,locationsAPI} from \"../DB/API\"\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport moment from 'moment'\nimport AppointmentsList from '../Components/AppointmentsList'\nimport PatientProfile from '../Components/PatientProfile'\nimport '../Styles/Calender.css'\nimport '../Styles/AppointmentItem.css'\n\nconst CalenderSection = (props) =>{\n    const doc_ID = props.id;\n    const [clickedItem,setClickedItem] = useState();\n    const [data, setData] = useState(props.data);\n    const [date, setDate] = useState(new Date());\n    const [pat_ID, setPat_ID] = useState(0);\n    const [loc_ID, setLoc_ID] = useState(0);\n    const [locationData,setLocationData] = useState([]);\n    const [selectValue,setSelectedValue] = useState(0);\n\n    const onChange = date =>{\n        setDate(date);\n        getAppointments(date,selectValue);\n    }\n    \n    const mydate = moment(date);\n    const newdate = mydate.format('YYYY-MM-DD');\n    console.log(\"new date is\",newdate,\"Appointment id \",pat_ID,\"location id \",loc_ID);\n\n    //Get All appointments by date\n    const getAppointments = (dateValue,selectedValue) => {\n        const mydate = moment(dateValue);\n        const newdate = mydate.format('YYYY-MM-DD');\n        console.log(\"new date is\",newdate,\"Appointment id \",pat_ID,\"location id \",loc_ID);\n        appointmentsByDateAPI(doc_ID,selectedValue,pat_ID,newdate)\n        .then(result => {\n            console.log(\"Appointment api\",result);\n            setData(result);\n        });\n    }\n\n    const refreshCallBack=()=>{\n        // console.log(\"Call back\");\n        appointmentsByDateAPI(doc_ID,loc_ID,pat_ID,newdate)\n        .then(result => {\n            console.log(\"Appointment api\",result);\n            setData(result);\n        });\n    }\n\n    //Patient info\n    const getPatientInfo = () => {\n        patientInfoAPI(1)\n        .then(result => {\n            console.log(\"patient info api\",result);\n        });\n    }\n\n    //Appointment details\n    const getAppointmentDetail = () => {\n        appointmentDetailAPI(1)\n        .then(result => {\n            console.log(\"Appointment history api\",result);\n        });\n    }\n\n    const handleAppointmentItem = (item) =>{\n        console.log(\"appointmentclicked\",item.patient.patient_id)\n        appointmentDetailAPI(item.patient.patient_id)\n        .then(result => {\n            console.log(\"patient info api\",result);\n            setClickedItem(result[0]);\n        });\n        \n    }\n\n    const callBack = (status, appointment_id) => {\n        console.log(\"Call back from list item: \", status, \"Appointment ID: \", appointment_id);\n        if(status === \"inprogress\" || status === \"upcoming\"){\n            props.callback(status,appointment_id);\n        }\n        getAppointments(date,selectValue);\n    }\n\n    const renderItem = () => {\n        return (\n        <div>\n            {data.map((item,i)=>( <AppointmentsList key={i} className={\"appointment-item\"} \n            pat_ID={pat_ID} loc_ID={loc_ID} id={doc_ID} itemData={item} \n            onClick={()=>handleAppointmentItem(item)} callback={callBack}  />))}\n        </div>\n        )\n    }\n\n    useEffect(() => {\n        locationsAPI(doc_ID).then(result => {\n            console.log(\"location api in calender results\",result);\n            setLocationData(result);\n            // setSelectedValue(data.appointment_location.appointment_location_of_doctor);\n            // collectDisabledDays(data.appointment_location.days);\n        });\n    },[]);\n\n\n    const handleChange1 = (e) =>{\n        setSelectedValue(e.target.value);\n        getAppointments(date,e.target.value);\n      }\n\n    const renderItems = () => {\n        console.log(\"locationData is \", locationData);\n        return (\n        locationData.map((item,i)=>(   \n            <option value={item.doctors_hospital_location_id} days={item.days}>{item.location}</option>\n        ))\n        )\n    }   \n    return(\n        <Container fluid>\n            <Row>\n                <Col lg={5}>\n                    <div>\n                        <Container style={{margin:15}}>\n                            <Row style={{display:\"flex\", flexDirection:\"row\"}}>\n                                <div style={{marginRight:10}}> <label>Select Location : </label> </div>   \n                                <div>\n                                <select value={selectValue} \n                                onChange={handleChange1}>\n                                    <option value={0} >{\"All\"}</option>\n                                    {renderItems()}\n                                    </select>\n                            </div>\n                            </Row>\n                        </Container>\n                    </div>\n                    <div style={styles.label}>\n                        <label>Date</label>\n                        <Calender\n                            onChange={onChange} \n                            value={date}\n                        />\n                    </div>\n                    <div style={styles.label}>\n                        <label>Timeline Que</label>\n                    </div>\n                    <div>\n                        {renderItem()}\n                    </div>\n                </Col>\n                <Col lg={7}>\n                    {!!clickedItem &&\n                        <div>\n                            <PatientProfile pat_ID={pat_ID} loc_ID={loc_ID} id={doc_ID} itemData={clickedItem} />\n                        </div>\n                    }\n                </Col>\n            </Row>\n        </Container>\n    )\n}\nexport default CalenderSection\n\nconst styles = {\n    label: {fontSize: 14, color: \"grey\", textAlign: \"Left\", marginLeft:\"20px\", marginTop:\"20px\"}\n}\nCalenderSection.defaultProps = {\n    data: [\n    ]\n}"]},"metadata":{},"sourceType":"module"}